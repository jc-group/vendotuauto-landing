---

---

<section class="py-12 bg-[#EF4444] text-white text-center">
  <div class="max-w-2xl mx-auto px-4">
    <h2 class="text-2xl font-bold mb-4">¿Listo para vender tu coche?</h2>
    <p class="text-base mb-6">
      Publicar tu auto es gratis, rápido y seguro. Crea tu perfil en minutos y llega a compradores
      reales con solo un clic.
    </p>
    <!-- Modal trigger -->
    <label
      for="waitlist-modal"
      class="inline-block bg-white text-[#EF4444] font-semibold px-6 py-3 rounded-full hover:bg-gray-100 transition cursor-pointer"
    >
      Publica tu coche ahora
      <span class="text-lg">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          class="h-5 w-5 inline-block ml-2"
        >
          <path
            d="M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"
          ></path>
        </svg>
      </span>
    </label>
    <!-- Modal checkbox -->
    <input type="checkbox" id="waitlist-modal" class="hidden peer" />
    <!-- Modal -->
    <div
      class="fixed inset-0 z-50 bg-black/40 flex items-center justify-center px-4 transition-opacity duration-300 opacity-0 pointer-events-none peer-checked:opacity-100 peer-checked:pointer-events-auto"
    >
      <div class="bg-white max-w-md w-full rounded-xl p-6 shadow-lg relative">
        <label
          for="waitlist-modal"
          class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 cursor-pointer text-2xl"
          >×</label
        >
        <h2 class="text-xl font-bold text-gray-900 mb-2">Únete a la lista de espera</h2>
        <p class="text-sm text-gray-600 mb-4">
          La aplicación aún está en construcción, pero estará disponible próximamente. Al
          registrarte, te avisaremos por WhatsApp o correo cuando esté lista y recibirás un cupón de
          descuento para el programa premium.
        </p>
        <form
          class="space-y-4"
          id="lead-form"
          onsubmit="event.preventDefault();"
        >
          <div>
            <input
              type="text"
              name="fullName"
              required
              minlength="6"
              placeholder="Nombre completo"
              class="w-full border border-gray-300 text-gray-900 rounded-md px-3 py-2 text-sm bg-white placeholder-gray-400"
              id="nombre-input"
            />
            <p id="nombre-error" class="text-xs text-red-600 mt-1 hidden"></p>
          </div>
          <div>
            <input
              type="tel"
              name="phone"
              placeholder="WhatsApp (10 dígitos)"
              pattern="[0-9]{10}"
              maxlength="10"
              inputmode="numeric"
              class="w-full border border-gray-300 text-gray-900 rounded-md px-3 py-2 text-sm bg-white placeholder-gray-400"
              title="Ingresa un número de WhatsApp válido de 10 dígitos"
              id="whatsapp-input"
            />
            <p id="whatsapp-error" class="text-xs text-red-600 mt-1 hidden"></p>
          </div>
          <div>
            <input
              type="email"
              name="email"
              placeholder="Correo electrónico"
              required
              class="w-full border border-gray-300 text-gray-900 rounded-md px-3 py-2 text-sm bg-white placeholder-gray-400"
              id="email-input"
            />
            <p id="email-error" class="text-xs text-red-600 mt-1 hidden"></p>
          </div>
          <button
            type="submit"
            class="bg-[#EF4444] hover:bg-[#dc2626] text-white w-full py-2 rounded-md text-sm font-semibold"
            >Unirme</button
          >
        </form>
      </div>
    </div>
  </div>
</section>
<script type="module" is:inline>
  const form = document.getElementById('lead-form');
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      // Validación extra
      let valid = true;
      document.getElementById('nombre-error').classList.add('hidden');
      document.getElementById('whatsapp-error').classList.add('hidden');
      document.getElementById('email-error').classList.add('hidden');
      const nombre = form.fullName;
      if (!nombre.value.trim() || nombre.value.length < 6) {
        document.getElementById('nombre-error').textContent =
          'El nombre es obligatorio y debe tener al menos 6 caracteres.';
        document.getElementById('nombre-error').classList.remove('hidden');
        valid = false;
      }
      const whatsapp = form.phone;
      if (whatsapp.value && !/^\d{10}$/.test(whatsapp.value)) {
        document.getElementById('whatsapp-error').textContent = 'El número debe tener 10 dígitos.';
        document.getElementById('whatsapp-error').classList.remove('hidden');
        valid = false;
      }
      const email = form.email;
      if (!email.value.trim()) {
        document.getElementById('email-error').textContent = 'El correo es obligatorio.';
        document.getElementById('email-error').classList.remove('hidden');
        valid = false;
      } else if (!/^\S+@\S+\.\S+$/.test(email.value)) {
        document.getElementById('email-error').textContent = 'Ingresa un correo válido.';
        document.getElementById('email-error').classList.remove('hidden');
        valid = false;
      }
      if (!valid) return;
      const data = {
        fullName: form.fullName.value,
        phone: form.phone.value,
        email: form.email.value,
      };
      const res = await fetch('/api/googleSheetSaveApi', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      });
      if (res.ok) {
        alert('Datos enviados correctamente ✅');
        form.reset();
        document.getElementById('waitlist-modal').checked = false;
      } else {
        alert('Error al enviar los datos ❌');
      }
    });
  }
</script>
